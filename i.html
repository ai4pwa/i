<!DOCTYPE html>
<html>
<head>
  <title>Loading...</title>
</head>
<body>
  <div id="app">Loading page...</div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const id = params.get('page_id');

    if (!id) {
      document.getElementById('app').innerText = "No page ID given!";
    } else {
      fetch(`https://app.base44.com/api/apps/6812ad73a9594a183279deba/entities/DataRecord?_id=${id}`, {
        headers: {
          'api_key': '69315aa5aa7f4b6fa99c7a420da68bdd',
          'Content-Type': 'application/json'
        }
      })
      .then(res => res.json())
      .then(data => {
        const html = data.payload?.html_content;
        if (!html) {
          document.getElementById('app').innerText = "No content in response.";
        } else {
          // Create a new document and replace the current one
          document.open();
          document.write(html);
          document.close();
        }
      })
      .catch((err) => {
        document.getElementById('app').innerText = "Failed to load page data.";
        console.error(err);
      });
    }
  </script>
</body>
</html>
